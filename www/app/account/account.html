<ion-view view-title="Profile" class="font-thin" style="background:#fafafc;margin-left: 0 !important" cache-view="false" hide-nav-bar="true">

    <ion-nav-buttons side="right">
          <button class="button button-dark button-clear icon ion-android-more-vertical" style="margin-right: 20px;z-index: 999;" ui-sref="settings"></button>
      </ion-nav-buttons>

    <ion-content class="has-tabs-top" style="top: 32px !important;">
    <div style="height:100%; margin-top: 10px;" class="bg-lightgrey" on-swipe-right="onSwipeRight()">
      <div class="list card" style="box-shadow: none;margin-left:0;margin-right:0;margin: 0;height: 419px;">
        <div class="item profile item-image bg-image" style="max-height: 400px;margin-top: 17px;background-image: url({{profile.userPhoto}})">
          <div class = "row" style="position: inherit;bottom: 9px;">
          <ion-list>
            <ion-item ng-if= "!profile.fullName" style="border:none;padding-bottom: 5px;background-color: transparent !important;left: 0;font-size: 20px;color:white; font-weight: 700;letter-spacing: 1.2px;">
              {{profile.firstName + " " + profile.lastName }}
            </ion-item>
            <ion-item ng-if= "profile.fullName" style="border:none;background-color: transparent !important;left: 0;font-size: 20px;font-weight: 700;color: white;letter-spacing: 1.2px;">
              {{profile.fullName }}
            </ion-item>
            <ion-item style="left: 0;border:none;text-align: left;font-weight: 500;padding-top: 0px;padding-bottom: 0px;background-color: transparent !important;font-size: 12px;letter-spacing: 1px;color: white">
              {{profile.userName }}
            </ion-item>
          </ion-list>
          <a class="col btn-floating btn-small waves-effect waves-light lighten-1" style="z-index: 5;position: inherit;right: 8px;background-color: white;display: inline-block;color: black;font-size: 24px;width:42px;height:42px;bottom: 5%;" ng-click="uploadUserPhoto()">
            <i class="icons ion-ios-camera" style="color: black;display: inherit;font-size: 24px;margin:auto;position: inherit;margin-top: -7%;margin-left: -12%"></i>
          </a>
          </div>
        </div>
      </div>
      <div class = "button button-clear icon ion-ios-gear profile-settings" ui-sref="settings" style="width: 100%">Settings</div>
      <div ng-if = "profile.userDescription" style="text-align: center; max-height: 100px;margin-bottom: 5px;margin-left: 30px;margin-right: 30px;line-height: 25px;">{{ profile.userDescription }}</div>

        <div class="row no-padding bb-grey text-center" style="text-transform: capitalize;" >
            <div class="col font-thin" ng-class="{'text-medium balanced bb' : view.type === 1}" ng-click="view.type = 1">{{profile.totalPost}}<br/>Posts</div>
            <div class="col font-thin" ng-class="{'text-medium balanced bb' : view.type === 2}" ng-click="view.type = 2">{{profile.totalCommits}}<br/>Commits</div>
            <div class="col font-thin" ng-class="{'text-medium balanced bb' : view.type === 3}"  ng-click="view.type = 3">{{profile.totalPost}}<br/>Friends</div>
        </div>

        <div class="list card profile" style="background: transparent; height:100%; box-shadow: none;height:100%;margin: 0">
        <div ng-if="view.type === 1" style="height:100%;">
          <div ng-if="profile.posts == 0" class = "noCommits">
          You have not post any pictures yet
          </div>
                <div style="height: 700px">
                    <div class="row row-no-padding category-2-outer" ng-repeat="userPost in profile.posts | orderBy: 'created': true" ng-if="$index % 3 == 0">
                      <div class="col" style="padding: 5px !important">
                        <a ui-sref="post-detail({post:profile.posts[$index].key})">
                          <div class="category-2-item-wrapper">
                            <div class="category-2-item-content">
                              <div class = "multi-bg-outer" style="background-image: url({{profile.posts[$index].photo}}); background-color: transparent;z-index:5">
                              </div>
                            </div>
                          </div>
                        </a>
                      </div>
                      <div class="col" style="padding: 5px !important ">
                        <a ui-sref="post-detail({post:profile.posts[$index+1].key})">
                          <div class="category-2-item-wrapper">
                            <div class="category-2-item-content">
                              <div class = "multi-bg-outer" style="background-image: url({{profile.posts[$index+1].photo}}); background-color: transparent;z-index:5">
                              </div>
                            </div>
                          </div>
                        </a>
                      </div>
                      <div class="col" style="padding: 5px !important ">
                        <a ui-sref="post-detail({post:profile.posts[$index+2].key})">
                          <div class="category-2-item-wrapper">
                            <div class="category-2-item-content">
                              <div class = "multi-bg-outer" style="background-image: url({{profile.posts[$index+2].photo}}); background-color: transparent;z-index:5">
                              </div>
                            </div>
                          </div>
                        </a>
                      </div>
                    </div>
                </div>
            </div>

          <div ng-if="view.type === 2" style="height:100%;">
            <div ng-if="profile.profileCommits == 0" class = "noCommits">
              You have not commited to any event post yet.
            </div>
                      <div class="row row-no-padding category-2-outer" ng-repeat="userCommit in profile.profileCommits | orderBy: 'created': true" ng-if="$index % 3 == 0">
                        <div class="col" style="padding: 5px !important">
                          <a ui-sref="post-detail({post:profile.profileCommits[$index].key})">
                            <div class="category-2-item-wrapper">
                              <div class="category-2-item-content">
                                <div class = "multi-bg-outer" style="background-image: url({{profile.profileCommits[$index].photo}}); background-color: transparent;z-index:5">
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                        <div class="col" style="padding: 5px !important ">
                          <a ui-sref="post-detail({post:profile.profileCommits[$index+1].key})">
                            <div class="category-2-item-wrapper">
                              <div class="category-2-item-content">
                                <div class = "multi-bg-outer" style="background-image: url({{profile.profileCommits[$index+1].photo}}); background-color: transparent;z-index:5">
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                        <div class="col" style="padding: 5px !important ">
                          <a ui-sref="post-detail({post:profile.profileCommits[$index+2].key})">
                            <div class="category-2-item-wrapper">
                              <div class="category-2-item-content">
                                <div class = "multi-bg-outer" style="background-image: url({{profile.profileCommits[$index+2].photo}}); background-color: transparent;z-index:5">
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                      </div>
                </div>

        <div ng-if="view.type === 3" style="background: transparent; box-shadow: none; margin-top: 20px;">
          <ion-list ng-if="userPartners == 0" class = "noCommits">
            <ion-item>
              You have no friends yet
            </ion-item>
              <ion-item class="item-note" style="width: 100%; border: none;" ui-sref = "friendPartners({friendPartner:profile})">
                <a class="button button-calm profile" style="border-color: #F10707; background-color: #F10707;">Find Friends</a>
              </ion-item>
          </ion-list>
            <div class="item item-divider" ng-if="userPartners > 0">
                FRIENDS
                <span class="item-note" ui-sref = "partners({partner:profile.userId})">
                    <a class="button button-calm profile" style="border-color: #F10707; background-color: #F10707;">Find More</a>
                </span>
            </div>
              <div class="item item-avatar item-button-right followers" ng-if="userPartners > 0" style = "border: none" ui-sref="friend({contact:value.userId})" ng-repeat="value in contacts.itemsArr">
                <img ng-src="{{value.userPhoto}}" fallback-src="img/profile-picture.png">
                <h2 class = "lead" style="font-weight: 400 !important;">{{value.userName}}</h2>
            </div>

            </div>
        </div>
      </div>
      <ion-infinite-scroll on-infinite="loadMore() || loadMoreUserCommits() || loadMorePartnerPost() || loadMoreContacts()" ng-if="!moreToScroll" distance="1%"></ion-infinite-scroll>
    </ion-content>
</ion-view>
