<ion-view title="Post" class="bg-lightgrey">

    <ion-nav-buttons side = "left">
      <button class="button button-icon button-clear button-dark" ng-click="fullscreenPopover.show($event);">
            <img src="img/TTG-Symbol-2015-02.png" style="position: relative;top: 2px;height: 29px;left: 5px;">
         </button>
    </ion-nav-buttons>

    <ion-nav-buttons side="right">
         <button class="button button-clear" ng-click="showConfirm()" >
          <i class="icon ion-android-more-vertical" style="padding-right: 21px;"></i>
        </button>
   </ion-nav-buttons>

    <ion-content class="has-header" style="top: 44px;"scroll-event-interval="5" padding="false">

        <div class="card post-detail">
            <div class="item item-body" style="padding: 0">
                <img class="full-image" ng-src="{{post.photo}}">
                <div class="item item-avatar" ui-sref="tabs.post-detail({post:postId})">
                    <img ng-src="{{post.avatar}}" ui-sref="tabs.accounts({account:userId})" style="margin-top:13px">
                    <h2>{{post.owner}}</h2>
                    <p ng-if="post.description">{{post.description}}</p>
                    <p ng-if="post.location" style="color:blue">{{ post.location }}</p>
                    <p ng-if="post.date" class="text-smaller" am-time-ago="{{}}">{{ post.date}}</p>
                </div>
                <div class="item comments">
                    <p>
                        <span ng-click="like(post);"><img ng-src="{{liker.photo}}" class="likers" ng-repeat="liker in post.likes | limitTo:-3"><span class="pull-left interact"> +{{post.totalLikes}} Like</span>
                        <span ng-click="commit(post);"><img ng-src="{{commiter.photo}}" class="commits" ng-repeat="commits in post.commits | limitTo:-3"><span class="pull-left interact"> +{{post.commits.length}} Commit</span>
                        <span ng-click="event();">Edit</a>
                        <span ui-sref="tabs.comments({post: post, type:'comments'})" class="pull-right">{{post.comments.length}} Comments</a>
                </p>
                </div>
                <div class="item comments no-b" style="margin-bottom: 21vh;">
                    <div class="item item-avatar" ng-repeat="comment in comments" ng-if="comment">
                        <img ng-src="{{comment.userPhoto}}"/>
                        <h2 class="text-small">{{comment.userName}}</h2>
                    <p class="text-smaller">{{comment.comment}}</p>
                    </div>
                    <p ng-if="!comment && !commentMode" ui-sref="tabs.comments({post: postId })" >No comments. be the first to <a ng-click="activateCommentMode()">leave a comment</a></p>
                    <div class="input-field col" ng-if="commentMode">
                    <input type="text" ng-model="comment">
                  </div>
                    <button ng-click="createComment('post',postId,profile.userId,comment)" ng-if="commentMode">submit</button>
                    <button ng-click="deactivateCommentMode()" ng-if="commentMode">cancel</button>
                </div>
            </div>
        </div>

    </ion-content>

    <ion-footer-bar class="no-bg bt-grey">
                <div class="row">
                        <div class="col text-left no-padding" ui-sref="tabs.likes({post: postId })"><i class="icon text-small" ng-class="liked == true ? 'ion-ios-heart': 'ion-ios-heart-outline'"> Like</i></div>
                        <div class="col text-left no-padding" ui-sref="tabs.commits({post: postId })"><i class="icon text-small" ng-class="commited == true ? 'ion-android-done-all': 'ion-android-done'"> Commits</i></div>
                        <div class="col text-center no-padding" ui-sref="tabs.comments({post: postId })"><i class="icon ion-ios-chatboxes-outline text-small"> {{post.comments.length}} Comment</i></div>
                        <div class="col text-right no-padding" ng-click="share(post);"><i class="icon ion-android-share-alt text-small"> Share</i></div>
                </div>
    </ion-footer-bar>

</ion-view>
